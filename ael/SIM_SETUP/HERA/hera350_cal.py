import aipy as a, numpy as n


class AntennaArray(a.pol.AntennaArray):
    def __init__(self, *args, **kwargs):
        a.pol.AntennaArray.__init__(self, *args, **kwargs)
#        self.ant_layout = kwargs.pop('ant_layout')
    def update(self):
        a.pol.AntennaArray.update(self)
    def get_params(self, ant_prms={'*':'*'}):
        try: prms = a.pol.AntennaArray.get_params(self, ant_prms)
        except(IndexError): return {}
        for k in ant_prms:
            if k == 'aa':
                if not prms.has_key('aa'): prms['aa'] = {}
                for val in ant_prms[k]:
                    if   val == 'tau_ns': prms['aa']['tau_ns'] = self.tau_ns
                    elif val == 'tau_ew': prms['aa']['tau_ew'] = self.tau_ew
                    elif val == 'gain': prms['aa']['gain'] = self.gain
            else:
                try: top_pos = n.dot(self._eq2zen, self[int(k)].pos)
                # XXX should multiply this by len_ns to match set_params.
                except(ValueError): continue
                if ant_prms[k] == '*':
                    prms[k].update({'top_x':top_pos[0], 'top_y':top_pos[1], 'top_z':top_pos[2]})
                else:
                    for val in ant_prms[k]:
                        if   val == 'top_x': prms[k]['top_x'] = top_pos[0]
                        elif val == 'top_y': prms[k]['top_y'] = top_pos[1]
                        elif val == 'top_z': prms[k]['top_z'] = top_pos[2]
        return prms
    def set_params(self, prms):
        changed = a.pol.AntennaArray.set_params(self, prms)
        for i, ant in enumerate(self):
            ant_changed = False
            top_pos = n.dot(self._eq2zen, ant.pos)
            try:
                top_pos[0] = prms[str(i)]['top_x']
                ant_changed = True
            except(KeyError): pass
            try:
                top_pos[1] = prms[str(i)]['top_y']
                ant_changed = True
            except(KeyError): pass
            try:
                top_pos[2] = prms[str(i)]['top_z']
                ant_changed = True
            except(KeyError): pass
            if ant_changed: ant.pos = n.dot(n.linalg.inv(self._eq2zen), top_pos) / a.const.len_ns * 100.
            changed |= ant_changed
        if changed: self.update()
        return changed


prms = {


    'loc': ('-30:43:17.5', '21:25:41.9'), # Karoo, ZAR, GPS. elevation=1085m
    'antpos': {
         0: {'top_x' : -8.029999999999999716e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         1: {'top_x' : -6.570000000000000284e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         2: {'top_x' : -5.109999999999999432e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         3: {'top_x' : -3.650000000000000000e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         4: {'top_x' : -2.189999999999999858e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         5: {'top_x' : -7.299999999999999822e+00, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         6: {'top_x' : 7.299999999999999822e+00, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         7: {'top_x' : 2.189999999999999858e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         8: {'top_x' : 3.650000000000000000e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         9: {'top_x' : 5.110000000000000142e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         10: {'top_x' : 6.570000000000000284e+01, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
         11: {'top_x' : -8.759999999999999432e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         12: {'top_x' : -7.300000000000000000e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         13: {'top_x' : -5.839999999999999858e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         14: {'top_x' : -4.379999999999999716e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         15: {'top_x' : -2.919999999999999929e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         16: {'top_x' : -1.459999999999999964e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         17: {'top_x' : 0.000000000000000000e+00, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         18: {'top_x' : 1.459999999999999787e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         19: {'top_x' : 2.919999999999999929e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         20: {'top_x' : 4.380000000000000426e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         21: {'top_x' : 5.840000000000000568e+01, 'top_y' : 1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
         22: {'top_x' : 8.029999999999999716e+01, 'top_y' : 1.222250519874437629e+02, 'top_z' : 0.000000000000000000e+00},
         23: {'top_x' : -9.489999999999999147e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         24: {'top_x' : -8.029999999999999716e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         25: {'top_x' : -6.570000000000000284e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         26: {'top_x' : -5.109999999999999432e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         27: {'top_x' : -3.650000000000000000e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         28: {'top_x' : -2.189999999999999858e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         29: {'top_x' : -7.299999999999999822e+00, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         30: {'top_x' : 7.299999999999999822e+00, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         31: {'top_x' : 2.189999999999999858e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         32: {'top_x' : 3.650000000000000000e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         33: {'top_x' : 5.110000000000000142e+01, 'top_y' : 1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
         34: {'top_x' : 7.300000000000000000e+01, 'top_y' : 1.095810810921909564e+02, 'top_z' : 0.000000000000000000e+00},
         35: {'top_x' : 8.759999999999999432e+01, 'top_y' : 1.095810810921909564e+02, 'top_z' : 0.000000000000000000e+00},
         36: {'top_x' : -1.021999999999999886e+02, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         37: {'top_x' : -8.759999999999999432e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         38: {'top_x' : -7.300000000000000000e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         39: {'top_x' : -5.839999999999999858e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         40: {'top_x' : -4.379999999999999716e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         41: {'top_x' : -2.919999999999999929e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         42: {'top_x' : -1.459999999999999964e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         43: {'top_x' : 0.000000000000000000e+00, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         44: {'top_x' : 1.459999999999999787e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         45: {'top_x' : 2.919999999999999929e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         46: {'top_x' : 4.380000000000000426e+01, 'top_y' : 9.272245323185390475e+01, 'top_z' : 0.000000000000000000e+00},
         47: {'top_x' : 6.570000000000000284e+01, 'top_y' : 9.693711019693816411e+01, 'top_z' : 0.000000000000000000e+00},
         48: {'top_x' : 8.029999999999999716e+01, 'top_y' : 9.693711019693816411e+01, 'top_z' : 0.000000000000000000e+00},
         49: {'top_x' : 9.489999999999999147e+01, 'top_y' : 9.693711019693816411e+01, 'top_z' : 0.000000000000000000e+00},
         50: {'top_x' : -1.095000000000000000e+02, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         51: {'top_x' : -9.489999999999999147e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         52: {'top_x' : -8.029999999999999716e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         53: {'top_x' : -6.570000000000000284e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         54: {'top_x' : -5.109999999999999432e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         55: {'top_x' : -3.650000000000000000e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         56: {'top_x' : -2.189999999999999858e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         57: {'top_x' : -7.299999999999999822e+00, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         58: {'top_x' : 7.299999999999999822e+00, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         59: {'top_x' : 2.189999999999999858e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         60: {'top_x' : 3.650000000000000000e+01, 'top_y' : 8.007848233660108406e+01, 'top_z' : 0.000000000000000000e+00},
         61: {'top_x' : 5.839999999999999858e+01, 'top_y' : 8.429313930168534341e+01, 'top_z' : 0.000000000000000000e+00},
         62: {'top_x' : 7.300000000000000000e+01, 'top_y' : 8.429313930168534341e+01, 'top_z' : 0.000000000000000000e+00},
         63: {'top_x' : 8.759999999999999432e+01, 'top_y' : 8.429313930168534341e+01, 'top_z' : 0.000000000000000000e+00},
         64: {'top_x' : 1.022000000000000028e+02, 'top_y' : 8.429313930168534341e+01, 'top_z' : 0.000000000000000000e+00},
         65: {'top_x' : -1.167999999999999972e+02, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         66: {'top_x' : -1.021999999999999886e+02, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         67: {'top_x' : -8.759999999999999432e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         68: {'top_x' : -7.300000000000000000e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         69: {'top_x' : -5.839999999999999858e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         70: {'top_x' : -4.379999999999999716e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         71: {'top_x' : -2.919999999999999929e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         72: {'top_x' : -1.459999999999999964e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         73: {'top_x' : 0.000000000000000000e+00, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         74: {'top_x' : 1.459999999999999787e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         75: {'top_x' : 2.919999999999999929e+01, 'top_y' : 6.743451144134829178e+01, 'top_z' : 0.000000000000000000e+00},
         76: {'top_x' : 5.110000000000000142e+01, 'top_y' : 7.164916840643255114e+01, 'top_z' : 0.000000000000000000e+00},
         77: {'top_x' : 6.570000000000000284e+01, 'top_y' : 7.164916840643255114e+01, 'top_z' : 0.000000000000000000e+00},
         78: {'top_x' : 8.029999999999999716e+01, 'top_y' : 7.164916840643255114e+01, 'top_z' : 0.000000000000000000e+00},
         79: {'top_x' : 9.489999999999999147e+01, 'top_y' : 7.164916840643255114e+01, 'top_z' : 0.000000000000000000e+00},
         80: {'top_x' : 1.095000000000000000e+02, 'top_y' : 7.164916840643255114e+01, 'top_z' : 0.000000000000000000e+00},
         81: {'top_x' : -1.240999999999999943e+02, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         82: {'top_x' : -1.095000000000000000e+02, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         83: {'top_x' : -9.489999999999999147e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         84: {'top_x' : -8.029999999999999716e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         85: {'top_x' : -6.570000000000000284e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         86: {'top_x' : -5.109999999999999432e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         87: {'top_x' : -3.650000000000000000e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         88: {'top_x' : -2.189999999999999858e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         89: {'top_x' : -7.299999999999999822e+00, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         90: {'top_x' : 7.299999999999999822e+00, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         91: {'top_x' : 2.189999999999999858e+01, 'top_y' : 5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         92: {'top_x' : 4.379999999999999716e+01, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         93: {'top_x' : 5.839999999999999858e+01, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         94: {'top_x' : 7.300000000000000000e+01, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         95: {'top_x' : 8.759999999999999432e+01, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         96: {'top_x' : 1.022000000000000028e+02, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         97: {'top_x' : 1.167999999999999972e+02, 'top_y' : 5.900519751117974465e+01, 'top_z' : 0.000000000000000000e+00},
         98: {'top_x' : -1.314000000000000057e+02, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         99: {'top_x' : -1.167999999999999972e+02, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         100: {'top_x' : -1.021999999999999886e+02, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         101: {'top_x' : -8.759999999999999432e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         102: {'top_x' : -7.300000000000000000e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         103: {'top_x' : -5.839999999999999858e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         104: {'top_x' : -4.379999999999999716e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         105: {'top_x' : -2.919999999999999929e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         106: {'top_x' : -1.459999999999999964e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         107: {'top_x' : 0.000000000000000000e+00, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         108: {'top_x' : 1.459999999999999787e+01, 'top_y' : 4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         109: {'top_x' : 3.650000000000000000e+01, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         110: {'top_x' : 5.110000000000000142e+01, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         111: {'top_x' : 6.570000000000000284e+01, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         112: {'top_x' : 8.029999999999999716e+01, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         113: {'top_x' : 9.489999999999999147e+01, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         114: {'top_x' : 1.095000000000000000e+02, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         115: {'top_x' : 1.240999999999999943e+02, 'top_y' : 4.636122661592693817e+01, 'top_z' : 0.000000000000000000e+00},
         116: {'top_x' : -1.387000000000000171e+02, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         117: {'top_x' : -1.240999999999999943e+02, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         118: {'top_x' : -1.095000000000000000e+02, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         119: {'top_x' : -9.489999999999999147e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         120: {'top_x' : -8.029999999999999716e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         121: {'top_x' : -6.570000000000000284e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         122: {'top_x' : -5.109999999999999432e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         123: {'top_x' : -3.650000000000000000e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         124: {'top_x' : -2.189999999999999858e+01, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         125: {'top_x' : -7.299999999999999822e+00, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         126: {'top_x' : 7.299999999999999822e+00, 'top_y' : 2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         127: {'top_x' : 2.919999999999999929e+01, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         128: {'top_x' : 4.379999999999999716e+01, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         129: {'top_x' : 5.839999999999999858e+01, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         130: {'top_x' : 7.300000000000000000e+01, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         131: {'top_x' : 8.759999999999999432e+01, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         132: {'top_x' : 1.022000000000000028e+02, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         133: {'top_x' : 1.167999999999999972e+02, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         134: {'top_x' : 1.314000000000000057e+02, 'top_y' : 3.371725572067413879e+01, 'top_z' : 0.000000000000000000e+00},
         135: {'top_x' : -1.460000000000000000e+02, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         136: {'top_x' : -1.314000000000000057e+02, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         137: {'top_x' : -1.167999999999999972e+02, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         138: {'top_x' : -1.021999999999999886e+02, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         139: {'top_x' : -8.759999999999999432e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         140: {'top_x' : -7.300000000000000000e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         141: {'top_x' : -5.839999999999999858e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         142: {'top_x' : -4.379999999999999716e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         143: {'top_x' : -2.919999999999999929e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         144: {'top_x' : -1.459999999999999964e+01, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         145: {'top_x' : 0.000000000000000000e+00, 'top_y' : 1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         146: {'top_x' : 2.189999999999999858e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         147: {'top_x' : 3.650000000000000000e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         148: {'top_x' : 5.110000000000000142e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         149: {'top_x' : 6.570000000000000284e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         150: {'top_x' : 8.029999999999999716e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         151: {'top_x' : 9.489999999999999147e+01, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         152: {'top_x' : 1.095000000000000000e+02, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         153: {'top_x' : 1.240999999999999943e+02, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         154: {'top_x' : 1.386999999999999886e+02, 'top_y' : 2.107328482542133941e+01, 'top_z' : 0.000000000000000000e+00},
         155: {'top_x' : -1.460000000000000000e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         156: {'top_x' : -1.314000000000000057e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         157: {'top_x' : -1.167999999999999972e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         158: {'top_x' : -1.022000000000000028e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         159: {'top_x' : -8.759999999999999432e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         160: {'top_x' : -7.300000000000000000e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         161: {'top_x' : -5.839999999999999858e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         162: {'top_x' : -4.379999999999999716e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         163: {'top_x' : -2.919999999999999929e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         164: {'top_x' : -1.459999999999999964e+01, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         165: {'top_x' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
         166: {'top_x' : 1.459999999999999964e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         167: {'top_x' : 2.919999999999999929e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         168: {'top_x' : 4.379999999999999716e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         169: {'top_x' : 5.839999999999999858e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         170: {'top_x' : 7.300000000000000000e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         171: {'top_x' : 8.759999999999999432e+01, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         172: {'top_x' : 1.022000000000000028e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         173: {'top_x' : 1.167999999999999972e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         174: {'top_x' : 1.314000000000000057e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         175: {'top_x' : 1.460000000000000000e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
         176: {'top_x' : -1.386999999999999886e+02, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         177: {'top_x' : -1.240999999999999943e+02, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         178: {'top_x' : -1.095000000000000000e+02, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         179: {'top_x' : -9.489999999999999147e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         180: {'top_x' : -8.029999999999999716e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         181: {'top_x' : -6.570000000000000284e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         182: {'top_x' : -5.110000000000000142e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         183: {'top_x' : -3.650000000000000000e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         184: {'top_x' : -2.189999999999999858e+01, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         185: {'top_x' : -7.299999999999999822e+00, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         186: {'top_x' : 7.299999999999999822e+00, 'top_y' : -1.264397089525280293e+01, 'top_z' : 0.000000000000000000e+00},
         187: {'top_x' : 2.189999999999999858e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         188: {'top_x' : 3.650000000000000000e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         189: {'top_x' : 5.110000000000000142e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         190: {'top_x' : 6.570000000000000284e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         191: {'top_x' : 8.029999999999999716e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         192: {'top_x' : 9.489999999999999147e+01, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         193: {'top_x' : 1.095000000000000000e+02, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         194: {'top_x' : 1.240999999999999943e+02, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         195: {'top_x' : 1.386999999999999886e+02, 'top_y' : -4.214656965084268236e+00, 'top_z' : 0.000000000000000000e+00},
         196: {'top_x' : -1.314000000000000057e+02, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         197: {'top_x' : -1.167999999999999972e+02, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         198: {'top_x' : -1.022000000000000028e+02, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         199: {'top_x' : -8.759999999999999432e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         200: {'top_x' : -7.300000000000000000e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         201: {'top_x' : -5.839999999999999858e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         202: {'top_x' : -4.379999999999999716e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         203: {'top_x' : -2.919999999999999929e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         204: {'top_x' : -1.459999999999999964e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         205: {'top_x' : 0.000000000000000000e+00, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         206: {'top_x' : 1.459999999999999964e+01, 'top_y' : -2.528794179050560587e+01, 'top_z' : 0.000000000000000000e+00},
         207: {'top_x' : 2.919999999999999929e+01, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         208: {'top_x' : 4.379999999999999716e+01, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         209: {'top_x' : 5.839999999999999858e+01, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         210: {'top_x' : 7.300000000000000000e+01, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         211: {'top_x' : 8.759999999999999432e+01, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         212: {'top_x' : 1.022000000000000028e+02, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         213: {'top_x' : 1.167999999999999972e+02, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         214: {'top_x' : 1.314000000000000057e+02, 'top_y' : -1.685862786033707295e+01, 'top_z' : 0.000000000000000000e+00},
         215: {'top_x' : -1.240999999999999943e+02, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         216: {'top_x' : -1.095000000000000000e+02, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         217: {'top_x' : -9.489999999999999147e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         218: {'top_x' : -8.029999999999999716e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         219: {'top_x' : -6.570000000000000284e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         220: {'top_x' : -5.110000000000000142e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         221: {'top_x' : -3.650000000000000000e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         222: {'top_x' : -2.189999999999999858e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         223: {'top_x' : -7.299999999999999822e+00, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         224: {'top_x' : 7.299999999999999822e+00, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         225: {'top_x' : 2.189999999999999858e+01, 'top_y' : -3.793191268575840525e+01, 'top_z' : 0.000000000000000000e+00},
         226: {'top_x' : 3.650000000000000000e+01, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         227: {'top_x' : 5.110000000000000142e+01, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         228: {'top_x' : 6.570000000000000284e+01, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         229: {'top_x' : 8.029999999999999716e+01, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         230: {'top_x' : 9.489999999999999147e+01, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         231: {'top_x' : 1.095000000000000000e+02, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         232: {'top_x' : 1.240999999999999943e+02, 'top_y' : -2.950259875558987233e+01, 'top_z' : 0.000000000000000000e+00},
         233: {'top_x' : -1.167999999999999972e+02, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         234: {'top_x' : -1.022000000000000028e+02, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         235: {'top_x' : -8.759999999999999432e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         236: {'top_x' : -7.300000000000000000e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         237: {'top_x' : -5.839999999999999858e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         238: {'top_x' : -4.379999999999999716e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         239: {'top_x' : -2.919999999999999929e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         240: {'top_x' : -1.459999999999999964e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         241: {'top_x' : 0.000000000000000000e+00, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         242: {'top_x' : 1.459999999999999964e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         243: {'top_x' : 2.919999999999999929e+01, 'top_y' : -5.057588358101121173e+01, 'top_z' : 0.000000000000000000e+00},
         244: {'top_x' : 4.379999999999999716e+01, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         245: {'top_x' : 5.839999999999999858e+01, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         246: {'top_x' : 7.300000000000000000e+01, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         247: {'top_x' : 8.759999999999999432e+01, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         248: {'top_x' : 1.022000000000000028e+02, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         249: {'top_x' : 1.167999999999999972e+02, 'top_y' : -4.214656965084267881e+01, 'top_z' : 0.000000000000000000e+00},
         250: {'top_x' : -1.095000000000000000e+02, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         251: {'top_x' : -9.489999999999999147e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         252: {'top_x' : -8.029999999999999716e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         253: {'top_x' : -6.570000000000000284e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         254: {'top_x' : -5.110000000000000142e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         255: {'top_x' : -3.650000000000000000e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         256: {'top_x' : -2.189999999999999858e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         257: {'top_x' : -7.299999999999999822e+00, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         258: {'top_x' : 7.299999999999999822e+00, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         259: {'top_x' : 2.189999999999999858e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         260: {'top_x' : 3.650000000000000000e+01, 'top_y' : -6.321985447626401822e+01, 'top_z' : 0.000000000000000000e+00},
         261: {'top_x' : 5.110000000000000142e+01, 'top_y' : -5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         262: {'top_x' : 6.570000000000000284e+01, 'top_y' : -5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         263: {'top_x' : 8.029999999999999716e+01, 'top_y' : -5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         264: {'top_x' : 9.489999999999999147e+01, 'top_y' : -5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         265: {'top_x' : 1.095000000000000000e+02, 'top_y' : -5.479054054609548530e+01, 'top_z' : 0.000000000000000000e+00},
         266: {'top_x' : -1.022000000000000028e+02, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         267: {'top_x' : -8.759999999999999432e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         268: {'top_x' : -7.300000000000000000e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         269: {'top_x' : -5.839999999999999858e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         270: {'top_x' : -4.379999999999999716e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         271: {'top_x' : -2.919999999999999929e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         272: {'top_x' : -1.459999999999999964e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         273: {'top_x' : 0.000000000000000000e+00, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         274: {'top_x' : 1.459999999999999964e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         275: {'top_x' : 2.919999999999999929e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         276: {'top_x' : 4.379999999999999716e+01, 'top_y' : -7.586382537151681049e+01, 'top_z' : 0.000000000000000000e+00},
         277: {'top_x' : 5.839999999999999858e+01, 'top_y' : -6.743451144134827757e+01, 'top_z' : 0.000000000000000000e+00},
         278: {'top_x' : 7.300000000000000000e+01, 'top_y' : -6.743451144134827757e+01, 'top_z' : 0.000000000000000000e+00},
         279: {'top_x' : 8.759999999999999432e+01, 'top_y' : -6.743451144134827757e+01, 'top_z' : 0.000000000000000000e+00},
         280: {'top_x' : 1.022000000000000028e+02, 'top_y' : -6.743451144134827757e+01, 'top_z' : 0.000000000000000000e+00},
         281: {'top_x' : -9.489999999999999147e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         282: {'top_x' : -8.029999999999999716e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         283: {'top_x' : -6.570000000000000284e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         284: {'top_x' : -5.110000000000000142e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         285: {'top_x' : -3.650000000000000000e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         286: {'top_x' : -2.189999999999999858e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         287: {'top_x' : -7.299999999999999822e+00, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         288: {'top_x' : 7.299999999999999822e+00, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         289: {'top_x' : 2.189999999999999858e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         290: {'top_x' : 3.650000000000000000e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         291: {'top_x' : 5.110000000000000142e+01, 'top_y' : -8.850779626676963119e+01, 'top_z' : 0.000000000000000000e+00},
         292: {'top_x' : 6.570000000000000284e+01, 'top_y' : -8.007848233660109827e+01, 'top_z' : 0.000000000000000000e+00},
         293: {'top_x' : 8.029999999999999716e+01, 'top_y' : -8.007848233660109827e+01, 'top_z' : 0.000000000000000000e+00},
         294: {'top_x' : 9.489999999999999147e+01, 'top_y' : -8.007848233660109827e+01, 'top_z' : 0.000000000000000000e+00},
         295: {'top_x' : -8.759999999999999432e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         296: {'top_x' : -7.300000000000000000e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         297: {'top_x' : -5.839999999999999858e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         298: {'top_x' : -4.379999999999999716e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         299: {'top_x' : -2.919999999999999929e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         300: {'top_x' : -1.459999999999999964e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         301: {'top_x' : 0.000000000000000000e+00, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         302: {'top_x' : 1.459999999999999964e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         303: {'top_x' : 2.919999999999999929e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         304: {'top_x' : 4.379999999999999716e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         305: {'top_x' : 5.839999999999999858e+01, 'top_y' : -1.011517671620224235e+02, 'top_z' : 0.000000000000000000e+00},
         306: {'top_x' : 7.300000000000000000e+01, 'top_y' : -9.272245323185389054e+01, 'top_z' : 0.000000000000000000e+00},
         307: {'top_x' : 8.759999999999999432e+01, 'top_y' : -9.272245323185389054e+01, 'top_z' : 0.000000000000000000e+00},
         308: {'top_x' : -8.029999999999999716e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         309: {'top_x' : -6.570000000000000284e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         310: {'top_x' : -5.110000000000000142e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         311: {'top_x' : -3.650000000000000000e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         312: {'top_x' : -2.189999999999999858e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         313: {'top_x' : -7.299999999999999822e+00, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         314: {'top_x' : 7.299999999999999822e+00, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         315: {'top_x' : 2.189999999999999858e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         316: {'top_x' : 3.650000000000000000e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         317: {'top_x' : 5.110000000000000142e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         318: {'top_x' : 6.570000000000000284e+01, 'top_y' : -1.137957380572752299e+02, 'top_z' : 0.000000000000000000e+00},
         319: {'top_x' : 8.029999999999999716e+01, 'top_y' : -1.053664241271066970e+02, 'top_z' : 0.000000000000000000e+00},
  #       320: {'top_x' : -2.263000000000000114e+02, 'top_y' : 3.835337838226683402e+02, 'top_z' : 0.000000000000000000e+00},
  #       321: {'top_x' : -8.029999999999999716e+01, 'top_y' : 3.835337838226683402e+02, 'top_z' : 0.000000000000000000e+00},
  #       322: {'top_x' : 6.570000000000000284e+01, 'top_y' : 3.835337838226683402e+02, 'top_z' : 0.000000000000000000e+00},
  #       323: {'top_x' : 2.116999999999999886e+02, 'top_y' : 3.835337838226683402e+02, 'top_z' : 0.000000000000000000e+00},
  #       324: {'top_x' : -2.993000000000000114e+02, 'top_y' : 2.570940748701403322e+02, 'top_z' : 0.000000000000000000e+00},
  #       325: {'top_x' : -1.533000000000000114e+02, 'top_y' : 2.570940748701403322e+02, 'top_z' : 0.000000000000000000e+00},
  #       326: {'top_x' : -7.299999999999999822e+00, 'top_y' : 2.570940748701403322e+02, 'top_z' : 0.000000000000000000e+00},
  #       327: {'top_x' : 1.386999999999999886e+02, 'top_y' : 2.570940748701403322e+02, 'top_z' : 0.000000000000000000e+00},
  #       328: {'top_x' : 2.920000000000000000e+02, 'top_y' : 2.613087318352245916e+02, 'top_z' : 0.000000000000000000e+00},
  #       329: {'top_x' : -3.723000000000000114e+02, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
  #       330: {'top_x' : -2.263000000000000114e+02, 'top_y' : 1.306543659176122958e+02, 'top_z' : 0.000000000000000000e+00},
  #       331: {'top_x' : 2.190000000000000000e+02, 'top_y' : 1.348690228826965836e+02, 'top_z' : 0.000000000000000000e+00},
  #       332: {'top_x' : 3.650000000000000000e+02, 'top_y' : 1.348690228826965836e+02, 'top_z' : 0.000000000000000000e+00},
  #       333: {'top_x' : -4.380000000000000000e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
  #       334: {'top_x' : -2.920000000000000000e+02, 'top_z' : 0.000000000000000000e+00, 'top_z' : 0.000000000000000000e+00},
  #       335: {'top_x' : 2.920000000000000000e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
  #       336: {'top_x' : 4.380000000000000000e+02, 'top_y' : 8.429313930168534696e+00, 'top_z' : 0.000000000000000000e+00},
  #       337: {'top_x' : -3.650000000000000000e+02, 'top_y' : -1.264397089525280364e+02, 'top_z' : 0.000000000000000000e+00},
  #       338: {'top_x' : -2.190000000000000000e+02, 'top_y' : -1.264397089525280364e+02, 'top_z' : 0.000000000000000000e+00},
  #       339: {'top_x' : 2.190000000000000000e+02, 'top_y' : -1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
  #       340: {'top_x' : 3.650000000000000000e+02, 'top_y' : -1.180103950223595035e+02, 'top_z' : 0.000000000000000000e+00},
  #       341: {'top_x' : -2.920000000000000000e+02, 'top_y' : -2.528794179050560729e+02, 'top_z' : 0.000000000000000000e+00},
  #       342: {'top_x' : -1.460000000000000000e+02, 'top_y' : -2.528794179050560729e+02, 'top_z' : 0.000000000000000000e+00},
  #       343: {'top_x' : 0.000000000000000000e+00, 'top_y' : -2.528794179050560729e+02, 'top_z' : 0.000000000000000000e+00},
  #       344: {'top_x' : 1.460000000000000000e+02, 'top_y' : -2.528794179050560729e+02, 'top_z' : 0.000000000000000000e+00},
  #       345: {'top_x' : 2.920000000000000000e+02, 'top_y' : -2.444501039748875257e+02, 'top_z' : 0.000000000000000000e+00},
  #       346: {'top_x' : -2.190000000000000000e+02, 'top_y' : -3.793191268575840809e+02, 'top_z' : 0.000000000000000000e+00},
  #       347: {'top_x' : -7.300000000000000000e+01, 'top_y' : -3.793191268575840809e+02, 'top_z' : 0.000000000000000000e+00},
  #       348: {'top_x' : 7.300000000000000000e+01, 'top_y' : -3.793191268575840809e+02, 'top_z' : 0.000000000000000000e+00},
  #       349: {'top_x' : 2.190000000000000000e+02, 'top_y' : -3.793191268575840809e+02, 'top_z' : 0.000000000000000000e+00}
      },
#	    'ant_layout': n.array([[-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, -1, -1, -1, -1, -1], [-1, -1, -1, -1, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, -1, -1, -1, -1], [-1, -1, -1, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, -1, -1, -1], [-1, -1, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, -1, -1], [-1, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, -1], [155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175], [-1, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, -1], [-1, -1, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, -1, -1], [-1, -1, -1, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, -1, -1, -1], [-1, -1, -1, -1, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, -1, -1, -1, -1], [-1, -1, -1, -1, -1, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, -1, -1, -1, -1, -1, -1, -1, -1, -1], [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1]])
}



def get_aa(freqs):
    '''Return the AntennaArray to be used for simulation.'''
    location = prms['loc']
    antennas = []
    phsoff = {'x':[0.,0.], 'y':[0.,0.]}
    nants = len(prms['antpos'])
    for i in range(nants):
        bp_r = {'x':n.array([0.0]*9), 'y':n.array([0.0]*9)}
        bp_i = {'x':n.array([0.0]*3), 'y':n.array([0.0]*3)}
        antennas.append(a.pol.Antenna(0,0,0, a.fit.Beam(freqs),
             amp={'x':1.,'y':1.},bp_r=bp_r, bp_i=bp_i, phsoff=phsoff))
    aa = AntennaArray(prms['loc'], antennas)#, ant_layout=prms['ant_layout'])
#    for i in range(nants):
#        pos = prms['antpos-top'][i]
#        i = str(i)
#        aa.set_params({i:{'top_x':pos[0], 'top_y':pos[1], 'top_z':pos[2]}})
    for i in range(nants):
        pos = prms['antpos'][i]
        i = str(i)
        aa.set_params({i:pos})
    return aa

